<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<title>FindHouse Join Page</title>
<th:block th:replace="~{/layout/member_basic.html :: setContent(~{this::content})}">
    <th:block th:fragment="content">

        <div id="auth">
            <h3 class="auth-title">Member Join</h3>
            <p class="auth-subtitle mb-5">회원가입을 위한
                <code class="highlighter-rouge">정보</code> 를 입력해주세요.</p>

            <form class="form form-vertical form-inline" method="post" action="/member/join" id="inputForm">
                <div class="form-group position-relative mb-4">
                    <label style="font-weight: bold">ID</label>
                    <div class="input-group mb-3">
                        <input type="text" class="form-control " placeholder="아이디를 입력해주세요."
                               name="id" value="user" id="id">
                        <button class="btn btn-primary" type="button" id="checkId">
                            중복체크
                        </button>
                    </div>
                </div>
                <div class="form-group position-relative  mb-4">
                    <label style="font-weight: bold">PASSWORD</label>
                    <input type="password" class="form-control checkPassword" placeholder="비밀번호를 입력해주세요."
                           name="password" value="1111" id="password">
                </div>
                <div class="form-group position-relative mb-4">
                    <label style="font-weight: bold">PASSWORD CHECK</label>
                    <input type="password" class="form-control checkPassword"
                           placeholder="비밀번호를 다시 입력해주세요."
                           name="passwordCheck" value="1111" id="passwordCheck">
                </div>
                <div class="form-group position-relative mb-4">
                    <label style="font-weight: bold">이름</label>
                    <input type="text" class="form-control " placeholder="이름을 입력해주세요."
                           name="name" value="홍길동">
                </div>
                <div class="form-group position-relative mb-4">
                    <label style="font-weight: bold">닉네임</label>
                    <input type="text" class="form-control " placeholder="닉네임을 입력해주세요."
                           name="nickName" value="star1">
                </div>
                <div class="form-group position-relative mb-4">
                    <label style="font-weight: bold">생년월일</label>
                    <input type="date" id="birth" class="form-control "
                           name="birth">
                </div>
                <div class="form-group position-relative mb-4">
                    <label style="font-weight: bold">연락처</label>
                    <input type="text" class="form-control " placeholder="연락처를 입력해주세요."
                           name="contact" value="01024442233">
                </div>


                <button class="btn btn-primary btn-block btn-lg shadow-lg mt-4">Sign Up</button>
            </form>
            <div class="text-center mt-4 text-lg fs-4">
                <p class='text-gray-600'>Already have an account?
                    <a th:href="@{/member/login}" class="font-bold">Log in</a>.</p>
            </div>
        </div>


    </th:block>
</th:block>

<script>

    $(document).ready(function () {

        var checkId = $("#checkId");
        var id = $("#id");
        var password = $("#password");
        var passwordCheck = $("#passwordCheck");
        var inputForm = $("#inputForm");
        var checkPassword = $(".checkPassword");


        // form submit check
        /*
        * if empty -> submit no
        * else -> submit
        * */


        // id check
        checkId.click(function (){
            console.log("chekc id click !!!");
            console.log("id : " + id);

            $.ajax({
                url: '/ajax/duplicateCheckId?id=' + id.val(),
                type: "GET",
                contentType: "application/json; charset=utf-8",
                dataType: "text",
                success: function (result) {
                    console.log("check id result: " + result);
                    if(result == 'false'){
                        sweetAlert('success', 'this id is available', true);
                    }else{
                        sweetAlert('warning', 'this id is not available', false);
                    }
                }
            });
        })

        // pw check
        checkPassword.on('input', function(){
            password.val() == passwordCheck.val() ? changePw(true) : changePw(false);
        })


        // empty value check

        // sweet alert
        function sweetAlert(icon, title, confirm){
            Swal.fire({
                icon: icon,
                title: title,
                showConfirmButton: confirm,
                showCancelButton: true,
                confirmButtonText: 'OK',
                cancelButtonText: 'Cancel'
            }).then(result =>{
                if(result.isDismissed){
                    id.val('');
                }
            })
        }

        function changePw(result){
            // pw

        }

        /*
        checkId.click(function (e) {
            console.log("check id click !");
            var icon = '';
            var title = '';

            $.ajax({
                url: '/ajax/duplicateCheckId?id=' + id.val(),
                type: "GET",
                contentType: "application/json; charset=utf-8",
                dataType: "text",
                success: function (result) {
                    console.log("result: " + result);
                    if(result == 'false'){
                        icon = 'success';
                        title = 'this id is available';
                    }else{
                        icon = 'warning';
                        title = 'this id is not available';
                    }

                    Swal.fire({
                        icon: icon,
                        title: title,
                        showConfirmButton: true,
                        showCancelButton: true,
                        confirmButtonText: '사용하기',
                        cancelButtonText: '취소'
                    }).then(result =>{
                        if(result.isDismissed){
                            id.val('');
                        }
                    })
                }, error: function (request, status, error) {
                    alert("code:" + request.status + "\n" + "message:" + request.responseText + "\n" + "error:" + error);
                }
            });
        });*/
    });

</script>
